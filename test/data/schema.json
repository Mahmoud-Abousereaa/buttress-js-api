[
	{
		"name": "post",
		"type": "collection",
		"collection": "posts",
		"extends": [
			"timestamps"
		],
		"roles": [{
			"role": "public",
			"endpointDisposition": {
				"GET": "allow",
				"PUT": "deny",
				"POST": "deny",
				"DELETE": "deny"
			},
			"dataDisposition": {
				"read": "deny",
				"update": "deny"
			}
		}, {
			"role": "test",
			"endpointDisposition": {
				"GET": "allow",
				"PUT": "allow",
				"POST": "allow",
				"DELETE": "deny"
			},
			"dataDisposition": {
				"read": "allow",
				"update": "deny"
			}
		}],
		"properties": {
			"content": {
				"__type": "string",
				"__required": true,
				"__allowUpdate": true
			},
			"memberSecretContent": {
				"__type": "string",
				"__required": true,
				"__allowUpdate": true,
				"__permissions": [{
					"role": "user.member",
					"read": "allow",
					"update": "deny"
				}]
			},
			"adminSecretContent": {
				"__type": "string",
				"__required": true,
				"__allowUpdate": true
			},
			"kudos": {
				"__type": "number",
				"__default": 0,
				"__required": false,
				"__allowUpdate": true
			},
			"parentPostId": {
				"__type": "id",
				"__required": true,
				"__allowUpdate": false
			},
			"userId": {
				"__type": "id",
				"__required": true,
				"__allowUpdate": false
			}
		}
	},
	{
		"name": "company",
		"type": "collection",
		"collection": "companies",
		"properties": {
			"name": {
				"__type": "string",
				"__required": true,
				"__allowUpdate": true
			},
			"companyType": {
				"__type": "string",
				"__enum": ["prospect", "client", "supplier"],
				"__default": "prospect",
				"__required": true,
				"__allowUpdate": true
			},

			"primaryContact": {
				"__type": "string",
				"__required": false,
				"__default": null
			},
			"primaryLocation": {
				"__type": "string",
				"__required": false,
				"__default": null
			},

			"siccode": {
				"__type": "number",
				"__default": 0,
				"__allowUpdate": true
			},

			"contacts": {
				"__type": "array",
				"__default": [],
				"__allowUpdate": true,
				"__schema": {
					"id": {
						"__type": "id",
						"__required": true,
						"__allowUpdate": false
					},
					"name": {
						"__type": "string",
						"__default": "",
						"__required": true,
						"__allowUpdate": true
					},
					"role": {
						"__type": "string",
						"__default": "",
						"__required": false,
						"__allowUpdate": true
					},
					"responsibility": {
						"__type": "string",
						"__default": "",
						"__required": false,
						"__allowUpdate": true
					},
					"email": {
						"__type": "string",
						"__default": "",
						"__required": false,
						"__allowUpdate": true
					},
					"mobile": {
						"__type": "string",
						"__default": "",
						"__required": false,
						"__allowUpdate": true
					},
					"directDial": {
						"__type": "string",
						"__default": "",
						"__required": false,
						"__allowUpdate": true
					},
					"linkedInProfile": {
						"__type": "string",
						"__default": "",
						"__required": false,
						"__allowUpdate": true
					},
					"twitterProfile": {
						"__type": "string",
						"__default": "",
						"__required": false,
						"__allowUpdate": true
					}
				}
			},
			"locations": {
				"__type": "array",
				"__default": [],
				"__allowUpdate": true,
				"__schema": {
					"id": {
						"__type": "id",
						"__required": true,
						"__allowUpdate": false
					},
					"name": {
						"__type": "string",
						"__default": "",
						"__required": true,
						"__allowUpdate": true
					},
					"site": {
						"__type": "string",
						"__default": "",
						"__required": false,
						"__allowUpdate": true
					},
					"address": {
						"__type": "string",
						"__default": "",
						"__required": false,
						"__allowUpdate": true
					},
					"city": {
						"__type": "string",
						"__default": "",
						"__required": false,
						"__allowUpdate": true
					},
					"county": {
						"__type": "string",
						"__default": "",
						"__required": false,
						"__allowUpdate": true
					},
					"region": {
						"__type": "string",
						"__default": "",
						"__required": false,
						"__allowUpdate": true
					},
					"postCode": {
						"__type": "string",
						"__default": "",
						"__required": true,
						"__allowUpdate": true
					},
					"phoneNumber": {
						"__type": "string",
						"__default": "",
						"__required": false,
						"__allowUpdate": true
					},
					"email": {
						"__type": "string",
						"__default": "",
						"__required": false,
						"__allowUpdate": true
					}
				}
			},
			"notes": {
				"__type": "array",
				"__default": [],
				"__allowUpdate": true,
				"__schema": {
					"id": {
						"__type": "id",
						"__required": true,
						"__allowUpdate": false
					},
					"text": {
						"__type": "string",
						"__required": true,
						"__allowUpdate": true
					},
					"timestamp": {
						"__type": "date",
						"__default": "now",
						"__allowUpdate": false
					}
				}
			}
		}
	},
	{
		"name": "service",
		"type": "collection",
		"collection": "services",
		"properties": {
			"name": {
				"__type": "string",
				"__required": true,
				"__allowUpdate": true
			},
			"companyId": {
				"__type": "id",
				"__required": false,
				"__allowUpdate": true
			},
			"statusCode": {
				"__type": "number",
				"__required": true,
				"__allowUpdate": true
			},
			"description": {
				"__type": "string",
				"__required": false,
				"__allowUpdate": true
			},
			"serviceType": {
				"__type": "string",
				"__required": true,
				"__allowUpdate": true
			},
			"ownerUserId": {
				"__type": "id",
				"__required": true,
				"__allowUpdate": true
			},
			"appProp1": {
				"__type": "string",
				"__required": true,
				"__allowUpdate": true
			},
			"appProp2": {
				"__type": "number",
				"__default": 123,
				"__required": false,
				"__allowUpdate": false
			},
			"appProp3": {
				"__type": "date",
				"__default": null,
				"__required": false,
				"__allowUpdate": true
			},
			"appProp4": {
				"__type": "array",
				"__default": [1, 2, 3, 4],
				"__required": false,
				"__allowUpdate": true
			},
			"appProp5": {
				"__type": "string",
				"__default": "pending",
				"__enum": ["pending", "in-progress", "completed"],
				"__required": false,
				"__allowUpdate": true
			},
			"appProp6": {
				"nested": {
					"value": {
						"__type": "string",
						"__required": false,
						"__allowUpdate": false
					},
					"status": {
						"__type": "string",
						"__required": false,
						"__default": "pending",
						"__enum": ["pending", "done"],
						"__allowUpdate": true
					},
					"approverId": {
						"__type": "id",
						"__required": false,
						"__allowUpdate": true
					},
					"timestamp": {
						"__type": "date",
						"__default": "now",
						"__allowUpdate": true
					},
					"approvals": {
						"__type": "array",
						"__default": [],
						"__required": false,
						"__allowUpdate": true,
						"__schema": {
							"approverId": {
								"__type": "id",
								"__required": true,
								"__allowUpdate": true
							},
							"timestamp": {
								"__type": "date",
								"__default": "now",
								"__allowUpdate": true
							},
							"status": {
								"__type": "string",
								"__default": "pending",
								"__enum": ["pending", "approved", "rejected"],
								"__allowUpdate": true
							}
						}    
					}
				},
				"companyId": {
					"__type": "id",
					"__required": false,
					"__allowUpdate": true
				},
				"test": {
					"__type": "string",
					"__required": false,
					"__allowUpdate": false
				},
				"bool": {
					"__type": "boolean",
					"__required": false,
					"__default": false,
					"__allowUpdate": true
				},
				"date": {
					"__type": "date",
					"__required": false,
					"__allowUpdate": true
				}
			},
			"appProp7": {
				"__type": "array",
				"__default": [],
				"__required": false,
				"__schema": {
					"name": {
						"__type": "string",
						"__required": true,
						"__default": "",
						"__allowUpdate": true
					},
					"isInteresting": {
						"__type": "boolean",
						"__required": false,
						"__default": false,
						"__allowUpdate": true
					},
					"dateInteresting": {
						"__type": "date",
						"__required": false,
						"__default": null,
						"__allowUpdate": true
					},
					"nestedInteresting": {
						"nestedBool": {
							"__type": "boolean",
							"__required": false,
							"__default": false,
							"__allowUpdate": true
						},
						"nestedString": {
							"__type": "string",
							"__required": false,
							"__default": "pending",
							"__enum": ["pending", "completed"],
							"__allowUpdate": true
						}
					}
				},
				"__allowUpdate": true
			}
		}
	}
]